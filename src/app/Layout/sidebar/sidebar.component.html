<!-- Sidebar Toggle Button -->
<button *ngIf="!isSidebarOpen"
  (click)="isSidebarOpen = !isSidebarOpen"
  type="button"
  class="absolute top-4 left-4 z-50 block sm:hidden p-2 rounded-md  text-white bg-primary
   sm:hidden"
  [attr.aria-expanded]="isSidebarOpen">
  <span class="sr-only">Toggle sidebar</span>
  <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
    <path clip-rule="evenodd" fill-rule="evenodd"
          d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z">
    </path>
  </svg>
</button>



<aside
  [ngClass]="{
    'translate-x-0': isSidebarOpen,
    '-translate-x-full': !isSidebarOpen
  }"
  class="fixed top-0 left-0 z-40 w-64 h-screen pt-6 transition-transform duration-300 bg-white border-r border-gray-200 flex flex-col justify-between sm:translate-x-0"
  aria-label="Sidebar"
>
  <div class="px-4 flex flex-col gap-4">
    <!-- Logo and Collapse Button -->
    <div class="flex justify-between items-center mb-4">
      <div class="flex items-center gap-2">
        <img src="https://flowbite.com/docs/images/logo.svg" class="h-6 me-3 sm:h-7" alt="Labcore Logo" />
        <span class="self-center text-gray-700 font-semibold ml-2">LabCore</span>
      </div>
<!--      <button class="bg-gray-100 p-1 rounded-md hover:bg-gray-200">-->
<!--        <svg class="w-4 h-4 text-gray-600" fill="currentColor" viewBox="0 0 20 20">-->
<!--          <path d="M6 4l8 6-8 6V4z" />-->
<!--        </svg>-->
<!--      </button>-->
    </div>

    <!-- Profile Section -->
    <div>
      <p class="text-xs text-gray-400 font-semibold px-2 mb-1">Research</p>

      <ul class="space-y-2 text-sm">

        <!-- Users (Two User Silhouettes Icon) -->
        <li>
          <a routerLink="users" *ngIf="userRole == UserRole.Admin" class="flex items-center p-2 rounded-lg hover:bg-gray-100 text-gray-700" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users-icon lucide-users text-third"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><path d="M16 3.128a4 4 0 0 1 0 7.744"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><circle cx="9" cy="7" r="4"/></svg>
            <span class="ml-3 font-medium">Users</span>
          </a>
        </li>

        <!-- Dashboard (Circle Chart Icon) -->
        <li>
          <a *ngIf="userRole == UserRole.Manager || userRole == UserRole.Researcher" routerLink="/dashboard" class="flex items-center p-2 rounded-lg hover:bg-gray-100 text-gray-700" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-dashboard-icon lucide-layout-dashboard text-third"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>
            <span class="ml-3 font-medium">Dashboard</span>
          </a>
        </li>

        <li>
          <a  routerLink="/project" class="flex items-center p-2 rounded-lg hover:bg-gray-100 text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder-icon lucide-folder text-third"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>
            <span class="ml-3 font-medium">Projects</span>
          </a>
        </li>


        <li>
          <a  routerLink="/resources" class="flex items-center p-2 rounded-lg hover:bg-gray-100 text-gray-700" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-package-icon lucide-package text-third"><path d="M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"/><path d="M12 22V12"/><polyline points="3.29 7 12 12 20.71 7"/><path d="m7.5 4.27 9 5.15"/></svg>
            <span class="ml-3 font-medium">Resources</span>
          </a>
        </li>



        <li>
          <a *ngIf="userRole == UserRole.Manager || userRole == UserRole.Researcher"  routerLink="/mytaskitems" class="flex items-center p-2 rounded-lg hover:bg-gray-100 text-gray-700" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-todo-icon lucide-list-todo text-third"><rect x="3" y="5" width="6" height="6" rx="1"/><path d="m3 17 2 2 4-4"/><path d="M13 6h8"/><path d="M13 12h8"/><path d="M13 18h8"/></svg>
            <span class="ml-3 font-medium">My Tasks</span>
          </a>
        </li>


        <li>
          <a *ngIf="userRole == UserRole.Manager || userRole == UserRole.Researcher"  routerLink="/myreservations" class="flex items-center p-2 rounded-lg hover:bg-gray-100 text-gray-700" href="#">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-clock-icon lucide-calendar-clock text-third"><path d="M16 14v2.2l1.6 1"/><path d="M16 2v4"/><path d="M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"/><path d="M3 10h5"/><path d="M8 2v4"/><circle cx="16" cy="16" r="6"/></svg>
            <span class="ml-3 font-medium">My Reservations</span>
          </a>
        </li>

      </ul>
    </div>
  </div>

  <!-- Footer Section: Login / Register -->
  <div class="px-4 pb-4">
    <ul class="space-y-2 text-sm">
      <p class="text-xs text-gray-400 font-semibold px-2 mb-1">Account</p>
      <li *ngIf="!isAuthenticated">
        <a routerLink="/register" class="flex items-center p-2 rounded-xl hover:bg-blue-50 text-gray-700 transition-colors" href="#">
          <svg class="w-4 h-4 text-third" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
            <circle cx="8.5" cy="7" r="4" />
          </svg>
          <span class="ml-3 font-medium">Register</span>
        </a>
      </li>
      <li *ngIf="!isAuthenticated">
        <a routerLink="/login" class="flex items-center p-2 rounded-xl hover:bg-blue-50 text-gray-700 transition-colors" href="#">
          <svg class="w-4 h-4 text-third" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H3m6-6l-6 6 6 6" />
          </svg>
          <span class="ml-3 font-medium">Login</span>
        </a>
      </li>
      <!-- Account Dropdown Opening Up -->
      <li *ngIf="isAuthenticated" class="relative" (click)="showAccountDropdown = !showAccountDropdown">
        <button
          class="w-full flex items-center justify-between p-2 rounded-xl hover:bg-gray-100 text-gray-700 transition-colors"
          type="button"
        >
          <div class="flex items-center">
            <svg class="w-4 h-4 text-third" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2" />
              <circle cx="8.5" cy="7" r="4" />
            </svg>
            <span class="ml-3 font-medium">Account</span>
          </div>
          <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 15l-7-7-7 7" />
          </svg>
        </button>

        <!-- Dropdown opens UP -->
        <ul
          *ngIf="showAccountDropdown"
          class="absolute left-0 bottom-full mb-2 w-full bg-white border border-gray-200 rounded-xl shadow-lg z-10 text-sm"
        >
          <li>
            <a href="#" class="block px-4 py-2 hover:bg-gray-100 text-gray-700 rounded-t-xl">Profile</a>
          </li>
          <li>
            <a href="#" class="block px-4 py-2 hover:bg-gray-100 text-gray-700">Settings</a>
          </li>
          <li>
            <a href="#" class="block px-4 py-2 hover:bg-gray-100 text-gray-700 rounded-b-xl">Activity</a>
          </li>
        </ul>
      </li>
      <li *ngIf="isAuthenticated">
        <button
          (click)="logout()"
          type="button"
          class="w-full text-left flex items-center p-2 rounded-xl hover:bg-red-50 text-red-600 transition-colors"
        >
          <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1" />
          </svg>
          <span class="ml-3 font-medium">Logout</span>
        </button>
      </li>
    </ul>
  </div>
</aside>

<div (click)="closeSidebarIfMobile()" class="p-4 sm:ml-64 min-h-screen">
  <router-outlet>
  </router-outlet>
</div>
